<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <title> 
            Pomodoro Timer
      </title>
      <link rel="icon" type="logo/png" href="logo.png">
      <link rel="stylesheet" href="styles.css">
      <script src="index.js"></script>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pacifico">
</head>
<body>
      <div class="container">
            <div>
                  <h1>Pomodoro Timer</h1> 
            </div>
            <div class="circle">
                  <p id="circle-content">Keep Working</p>
                  <div class="timerDisplay">25:00</div>
                  <button class="btn" id="start">START</button>
            </div>
            <div class="settings">
                  <div class="neznau">
                        <p class="min">Work Duration</p>
                        <button class="btn plus" id="work-plus">+</button>
                        <div class="min" id="work-min"><span>25</span> mins</div>
                        <button class="btn minus" id="work-minus">-</button>
                  </div>
                        
                  <button class="btn" id="reset">RESET</button>
                        
                  <div class="neznau">
                        <p class="min">Break Duration</p>
                        <button class="btn plus" id="work-plus">+</button>
                        <div class="min" id="break-min"><span>5</span> mins</div>
                        <button class="btn minus" id="work-minus">-</button>
                  </div>
            </div>
      </div>
      <script>
            let countdown = 0; 
let seconds = 1500; 
let workTime = 25;
let breakTime = 5;
let isBreak = true;
let isPaused = true;

const circleContent = document.querySelector("#circle-content");
const timerDisplay = document.querySelector(".timerDisplay");
const startBtn = document.querySelector("#start");
const resetBtn = document.querySelector("#reset");
const workMin = document.querySelector("#work-min");
const breakMin = document.querySelector("#break-min");

const alarm = document.createElement('audio');
alarm.setAttribute("src", "http://localhost/Ringtones/bell-ringing-05.mp3");

startBtn.addEventListener('click', () => {
    clearInterval(countdown);
    isPaused = !isPaused;
    if (!isPaused) {
      countdown = setInterval(timer, 1000);
    }
  })
  
  resetBtn.addEventListener('click', () => {
    clearInterval(countdown);
    seconds = workTime * 60;
    countdown = 0;
    isPaused = true;
    isBreak = true;
  })
  
  function timer() {
    seconds--;
    if (seconds < 0) {
      clearInterval(countdown);
      alarm.currentTime = 0;
      alarm.play();
      seconds = (isBreak ? breakTime : workTime) * 60;
      isBreak = !isBreak;
    }
  }
  
  
  let increment = 5;
  
  let incrementFunctions =
    {
      "#work-plus": function () { workTime = Math.min(workTime + increment, 60) },
      "#work-minus": function () { workTime = Math.max(workTime - increment, 5) },
      "#break-plus": function () { breakTime = Math.min(breakTime + increment, 60) },
      "#break-minus": function () { breakTime = Math.max(breakTime - increment, 5) }
    };
  
  for (var key in incrementFunctions) {
    if (incrementFunctions.hasOwnProperty(key)) {
      document.querySelector(key).onclick = incrementFunctions[key];
    }
  }
  
  function countdownDisplay() {
    let minutes = Math.floor(seconds / 60);
    let remainderSeconds = seconds % 60;
    timerDisplay.textContent = `${minutes}:${remainderSeconds < 10 ? '0' : ''}${remainderSeconds}`;
  }
  
  function buttonDisplay() {
    if (isPaused && countdown === 0) {
      startBtn.textContent = "START";
    } else if (isPaused && countdown !== 0) {
      startBtn.textContent = "Continue";
    } else {
      startBtn.textContent = "Pause";
    }
  }
  
  function updateHTML() {
    countdownDisplay();
    buttonDisplay();
    isBreak ? circleContent.textContent = "Keep Working" : circleContent.textContent = "Take a Break!";
    workMin.textContent = workTime;
    breakMin.textContent = breakTime;
  }
  
  window.setInterval(updateHTML, 100);
  
  document.onclick = updateHTML;
      </script>
</body>
</html>